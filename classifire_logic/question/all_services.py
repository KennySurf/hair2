from services.gpt.gpt_client import send_to_gpt
from db.db_funcs import add_message, get_user_messages



def get_all_services_reply(user_id):
    history_user_messages = get_user_messages(user_id)

    all_services_intent_prompt = """
    –†–∞—Å—Å–∫–∞–∂–∏ –∫–ª–∏–µ–Ω—Ç—É, –∫–∞–∫–∏–µ —É –Ω–∞—Å –µ—Å—Ç—å —É—Å–ª—É–≥–∏, –≤ —Ç—ë–ø–ª–æ–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π –º–∞–Ω–µ—Ä–µ.
    –ü–µ—Ä–µ—á–µ–Ω—å:
    [
    "–ù–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –≤–æ–ª–æ—Å",
    "–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –≤–æ–ª–æ—Å",
    "–°—Ç—Ä–∏–∂–∫–∞ –≤–æ–ª–æ—Å",
    "–£–∫–ª–∞–¥–∫–∏ –∏ –º–µ–π–∫",
    "–£—Ö–æ–¥ –∑–∞ –≤–æ–ª–æ—Å–∞–º–∏",
    "–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –∏ –ª–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π",
    "–ü—Ä–æ–¥–∞–∂–∞ –≤–æ–ª–æ—Å"
    ]
    –ü–æ—Å–ª–µ —Å–ø–∏—Å–∫–∞ ‚Äî –º—è–≥–∫–æ –∏ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ —Å–ø—Ä–æ—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞: 
    —Ö–æ—á–µ—Ç –ª–∏ –æ–Ω, —á—Ç–æ–±—ã –º—ã –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏ –ø—Ä–æ —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ.
    –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —à–∞–±–ª–æ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤—Ä–æ–¥–µ:
    - "–ú–æ–≥—É –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –ª—é–±—É—é –∏–∑ –Ω–∏—Ö üòä"
    - "–•–æ—Ç–∏—Ç–µ, —Ä–∞—Å—Å–∫–∞–∂—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–∞–∫–æ–π-—Ç–æ —É—Å–ª—É–≥–µ?"
    """

    reply = send_to_gpt(history_user_messages + [{'role': 'system', 'content': all_services_intent_prompt}])
    add_message(user_id, 'assistant', reply)
    return reply